<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Lab 08 - Regression discontinuity, Islamic rule and the empowerment of the poor and pious</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Causal Inference</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Overview
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-flask"></span>
     
    Labs
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Lab01.html">Lab 1</a>
    </li>
    <li>
      <a href="Lab02.html">Lab 2</a>
    </li>
    <li>
      <a href="Lab03.html">Lab 3</a>
    </li>
    <li>
      <a href="Lab04.html">Lab 4</a>
    </li>
    <li>
      <a href="Lab05.html">Lab 5</a>
    </li>
    <li>
      <a href="Lab06.html">Lab 6</a>
    </li>
    <li>
      <a href="Lab07.html">Lab 7</a>
    </li>
    <li>
      <a href="Lab08.html">Lab 8</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Lab 08 - Regression discontinuity, Islamic rule and the empowerment of the poor and pious</h1>
<h3 class="subtitle">Individual assignment</h3>
<h4 class="date">Due: April 6 at 23:59</h4>

</div>


<style>
.column-left{
  float: left;
  width: 60%;
  text-align: left;
}
.column-right-small{
  float: right;
  width: 30%;
  text-align: right;
  padding-left: 10px;
  font-size:10px;
}

.column-right-large{
  float: right;
  width: 40%;
  text-align: left;
  padding-left: 10px;
}

.column-full{
  float: none;
  width: 100%;
  text-align: centre;
}


.column-full-left{
  float: none;
  width: 100%;
  text-align: left;
}

.center {
  height: 200px;
  border: 0px;
  text-align: center;
}


.RUsers {
  padding: 1em;
  background: aliceblue;
  color: black;
}


.SPSS {
  padding: 1em;
  background: whitesmoke;
  color: black;
}

</style>
<div class="column-full-left">
<ul>
<li>Please submit your lab using <a href="https://docs.google.com/forms/d/e/1FAIpQLSfqQbctV4gCQzxa8-Kxxi4TeR9B73N76PrNac3eA1zpAwAa3A/viewform">this link</a>.<br />
</li>
<li>If you have questions, please <a href="https://bit.ly/OferMeet">book a slot</a> during Ofer’s office hours!</li>
</ul>
</div>
<div class="column-right-large">
<p><img src="images/turkey-women.jpg" width="500px" /></p>
</div>
<div class="column-full-left">
<p>For this tutorial, we will analyze Erik Meyersson’s 2014 <a href="https://onlinelibrary-wiley-com.proxy-ub.rug.nl/doi/abs/10.3982/ECTA9878">paper</a>, “Islamic Rule and the Empowerment of the Poor and Pious.” Meyersson asks whether political control by Islamic religious political parties leads to a decrease in women’s rights, particularly female education rates.</p>
<p>Meyersson looks at Turkey in 1994, where an Islamic party gained political control in many municipalities, and a number of the election results were very close. He uses a regression discontinuity analysis of Islamic control on the rate of secondary school completion by girls, focusing on the Local Average Treatment Effect in areas where Islamic parties barely won or lost their elections.</p>
<p>You’ll need to install the ‘rdd’ package for this tutorial. You can find the dataset <a href="https://raw.githubusercontent.com/OferEngel/CausalInference/master/data/islamic.csv">here</a>, it contains the variables shown on the right hand side:</p>
<ol style="list-style-type: decimal">
<li>Suppose Meyersson found that women’s level of education is associated with the religious affiliation of the party in control. But such a finding would not suffice to conclude the nature of the causal association. Why is that? What alternative explanations might explain this association? How would we decide which explanation is the correct one?</li>
</ol>
</div>
<div class="column-right-large">
<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; ">
<caption>
Codebook for Meyersson’s (2014) paper
</caption>
<thead>
<tr>
<th style="text-align:left;">
Variable
</th>
<th style="text-align:left;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
iwm94
</td>
<td style="text-align:left;">
running/treatment variable: margin of Islamic party win or loss in 1994, pp: 0 indicates an exact tie, A margin of greater than zero means the Islamic party won
</td>
</tr>
<tr>
<td style="text-align:left;">
hischshr1520m
</td>
<td style="text-align:left;">
outcome: secondary school completion rates for ages 15-20 females
</td>
</tr>
<tr>
<td style="text-align:left;">
hischshr1520f
</td>
<td style="text-align:left;">
outcome: secondary school completion rates for ages 15-20 males
</td>
</tr>
<tr>
<td style="text-align:left;">
lpop1994
</td>
<td style="text-align:left;">
log of the locality population in 1994
</td>
</tr>
<tr>
<td style="text-align:left;">
sexr
</td>
<td style="text-align:left;">
sex ratio in locality
</td>
</tr>
<tr>
<td style="text-align:left;">
lareapre
</td>
<td style="text-align:left;">
log of locality area
</td>
</tr>
</tbody>
</table>
</div>
<div class="column-full-left">
<ol start="2" style="list-style-type: decimal">
<li><p>Calculate the difference in means in secondary school completion rates for females and males, comparing regions where Islamic parties won and lost in 1994. This is equivalent to the <code>SDO</code>, the simple difference in means <span class="math inline">\(\mathbb{E}\big[Y|T=1\big]-\mathbb{E}\big[Y|T=0\big]\)</span>. Do you think this is a credible estimate of the causal effect of Islamic party control? Why or why not? (Create a treatment variable, <code>islamicwin</code>, that indicates whether or not the Islamic party won the 1994 election. Then use the option <code>na.rm=T</code> to ignore missing data.)</p></li>
<li><p>Now we’ll start regression discontinuity analysis. First, select optimal bandwidths for testing female high school completion rates using the Imbens-Kalyanaram procedure.</p>
<ul>
<li>Explain what the bandwidth means in this case (Use the IKbandwidth function from the rdd package. Read the help file to see what the function requires). Using this band width, create a new dataset containing only data within the optimal bandwidth. Notice that if the cutoff point is <span class="math inline">\(C_o\)</span> optimal bandwidth is <span class="math inline">\(h\)</span>, you want to include regions where the running variable <span class="math inline">\(r\in[C_o-h, C_o+h]\)</span></li>
</ul></li>
</ol>
<p><br/></p>
<ol start="4" style="list-style-type: decimal">
<li><p>create a new dataset containing only data within the optimal bandwidth. Then find the Local Average Treatment Effect of Islamic party control on women’s secondary school education at the threshold, using the dataset you created in (d) and a simple linear regression that includes the treatment and running variable. How credible do you think this result is?</p></li>
<li><p>Use RD estimation to find the Local Average Treatment Effect of Islamic party control on men’s and women’s secondary school education at the threshold, using local linear regression estimated with the RDestimate function from the <code>rdd</code> package. Does the estimate differ from your previous estimates? Your code should be of the form <code>RDestimate(___~___, cutpoint=___, bw=___, data=___)</code></p></li>
<li><p>Plot the relationship between the running variable and outcome using local linear regressions. Use your plot to explain why your results do or do not differ strongly compared to your previous results.</p>
<ul>
<li>Code Hints: You can just use the plot() function directly on the object you created in the previous question. Use the range argument to control the x axis</li>
</ul></li>
</ol>
<p><br/></p>
<ol start="7" style="list-style-type: decimal">
<li><p>Perform placebo tests to check that the relationship between the running variable and out- come is not fundamentally discontinuous, by estimating RD estimates at placebo cutoffs of -0.1, -0.05, 0.05 and 0.1. What do you conclude? To run placebo cutoffs, use the <code>RDestimate</code> as before and but use a different cutoff.</p></li>
<li><p>Perform a robustness check for local randomisation at the threshold by performing RD estimates in the same way as in question (6) for the three background covariates <code>sexr</code>, <code>lop1994</code> and <code>lareapre</code>. What do you conclude?</p></li>
<li><p>Perform a McCrary test: another way to check for sorting at the theshold. Plot and interpret the results. Code Hints: Use the <code>DCdensity</code> function in the <code>rdd</code> package with the option <code>verbose=TRUE</code></p></li>
<li><p><em>Bonus:</em> Examine the sensitivity of the main RD result to the choice of bandwidth by calculating and plotting RD estimates and their associated 95% confidence intervals for a range of bandwidths from 0.05 to 0.6. To what extent do the results depend on the choice of bandwidth? Hints: Begin by creating a vector of thresholds such as thresholds &lt;- seq(from=0.05,to=0.6, by=0.005). Then use a for loop. You can extract the estimate and standard error from an RD estimate named <code>rdest</code> with the code <code>rdest$est[1]</code> and <code>rdest$se[1]</code></p></li>
</ol>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
